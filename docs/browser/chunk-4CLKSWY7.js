import{a as Q}from"./chunk-H2IJPMTS.js";import{$ as q,F as o,M as F,N,P as I,T,W as w,Y as E,Z as k,_ as s,aa as A,ba as M,ca as R,da as j,ea as z,fa as P,g as C,ga as L,ha as H,i as D,ia as G,ja as K,n as m,o as x,p as B,q as h,r as a,s as d,u as i,v as u,w as g,wa as J,y as S,z as y}from"./chunk-SHQWFIFR.js";var O=class{static phoneNumberValidator(r){return/^(\+\d{12}\s*$|\d{11}\s*$)/.test(r.value)?null:{phone:r.value}}};function X(t,r){t&1&&(i(0,"div",34),o(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043E\u0435 \u0438\u043C\u044F "),u())}function Y(t,r){t&1&&(i(0,"div",34),o(1," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 "),u())}function Z(t,r){if(t&1&&(i(0,"div"),a(1,X,2,0,"div",17)(2,Y,2,0,"div",17),u()),t&2){let n,e,l=y();m(),d("ngIf",(n=l.formValues.get("name"))==null||n.errors==null?null:n.errors.required),m(),d("ngIf",(e=l.formValues.get("name"))==null||e.errors==null?null:e.errors.pattern)}}function ee(t,r){t&1&&(i(0,"div",34),o(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043E\u044E \u0444\u0430\u043C\u0438\u043B\u0438\u044E "),u())}function te(t,r){t&1&&(i(0,"div",34),o(1," \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 "),u())}function ue(t,r){if(t&1&&(i(0,"div"),a(1,ee,2,0,"div",17)(2,te,2,0,"div",17),u()),t&2){let n,e,l=y();m(),d("ngIf",(n=l.formValues.get("lastName"))==null||n.errors==null?null:n.errors.required),m(),d("ngIf",(e=l.formValues.get("lastName"))==null||e.errors==null?null:e.errors.pattern)}}function ne(t,r){t&1&&(i(0,"div"),o(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043E\u0439 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430 "),u())}function re(t,r){t&1&&(i(0,"div",34),o(1," \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0444\u043E\u0440\u043C\u0430\u0442\u044B +375291112233 \u043B\u0438\u0431\u043E 80291112233 "),u())}function ie(t,r){if(t&1&&(i(0,"div",34),a(1,ne,2,0,"div",11)(2,re,2,0,"div",17),u()),t&2){let n,e,l=y();m(),d("ngIf",(n=l.formValues.get("phone"))==null||n.errors==null?null:n.errors.required),m(),d("ngIf",(e=l.formValues.get("phone"))==null||e.errors==null?null:e.errors.phone)}}function le(t,r){t&1&&(i(0,"div",34),o(1," \u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F "),u())}function oe(t,r){t&1&&(i(0,"div",34),o(1," \u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F "),u())}function me(t,r){t&1&&(i(0,"div",34),o(1," \u0418\u043D\u0434\u0435\u043A\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C 6 \u0446\u0438\u0444\u0440 "),u())}function de(t,r){if(t&1&&(i(0,"div"),a(1,oe,2,0,"div",17)(2,me,2,0,"div",17),u()),t&2){let n,e,l=y();m(),d("ngIf",(n=l.formValues.get("zip"))==null||n.errors==null?null:n.errors.required),m(),d("ngIf",((e=l.formValues.get("zip"))==null||e.errors==null?null:e.errors.pattern)||((e=l.formValues.get("zip"))==null||e.errors==null?null:e.errors.maxLength)||((e=l.formValues.get("zip"))==null||e.errors==null?null:e.errors.maxLength))}}function ae(t,r){t&1&&(i(0,"div",34),o(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438 "),u())}function se(t,r){t&1&&(i(0,"div",34),o(1," \u0412\u0432\u0435\u0434\u0435\u043D\u044B \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 "),u())}function pe(t,r){if(t&1&&(i(0,"div"),a(1,ae,2,0,"div",17)(2,se,2,0,"div",17),u()),t&2){let n,e,l=y();m(),d("ngIf",(n=l.formValues.get("address"))==null||n.errors==null?null:n.errors.required),m(),d("ngIf",(e=l.formValues.get("address"))==null||e.errors==null?null:e.errors.pattern)}}var V=class t{constructor(r,n,e){this.activatedRoute=r;this.http=n;this.productRequest=e}fb=D(G);formValues=this.fb.group({name:["",[s.required,s.pattern("^[\u0410-\u042F\u0430-\u044F ]+$")]],lastName:["",[s.required,s.pattern("^[\u0410-\u042F\u0430-\u044F ]+$")]],phone:["",[s.required,O.phoneNumberValidator]],country:["",[s.required]],zip:["",[s.required,s.pattern("^[0-9]{6}$"),s.maxLength(6)]],product:[""],address:["",[s.required,s.pattern("^[\u0410-\u042F\u0430-\u044F0-9-/. ]+$")]],comment:[""]},{updateOn:"blur"});subscription=null;subscriptionOrder=null;productToOder=null;ngOnInit(){this.subscription=this.activatedRoute.queryParams.subscribe(r=>{if(r.product){this.formValues.value.product=r.product;let n=$("#product");n&&n.val(r.product),this.productToOder=r.product}})}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscriptionOrder?.unsubscribe()}handleSubmit(){this.subscriptionOrder=this.productRequest.makeAnOrder({name:this.formValues.value.name,last_name:this.formValues.value.lastName,phone:this.formValues.value.phone,country:this.formValues.value.country,zip:this.formValues.value.zip,product:this.productToOder,address:this.formValues.value.address,comment:this.formValues.value.comment}).subscribe(r=>{if(r.success===1){let n=$("#orderForm"),e=$("#orderTitle");if(n&&e){let l=$("#hidden");e.detach(),n.detach(),l&&l.removeClass("d-none")}}else if(r.success===0){console.log("Error");let n=document.getElementById("validationServer");n&&(n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3))}})}numbersOnly(r){["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Delete","+"].includes(r.key)||r.key?.match(/\d+$/g)||r.preventDefault()}static \u0275fac=function(n){return new(n||t)(x(T),x(I),x(Q))};static \u0275cmp=B({type:t,selectors:[["order"]],standalone:!1,decls:58,vars:9,consts:[[1,"order-form","text-black"],[1,"container","form-container","mb-5","mt-5"],["id","orderTitle",1,"order-title","text-center","fw-bold","fs-2","mb-5"],["id","hidden",1,"order-title","orderContainer","d-none","text-center","fw-bold","fs-2","my-5","p-5","h-100"],[1,"text-primary-emphasis","fs-2","my-5"],[1,"btn","btn-outline-primary","my-5",3,"routerLink"],["novalidate","","id","orderForm",1,"form","d-md-flex","flex-md-column","justify-content-md-center","mx-auto","mb-5","clientOrder","needs-validation","pb-5",3,"ngSubmit","formGroup"],[1,"form-group","full-name","d-md-flex","flex-md-row","justify-content-md-between","mb-3"],[1,"full-name-item","justify-content-sm-center","col-md-4"],["for","clientsName",1,"form-label"],["type","text","id","clientsName","formControlName","name","value","","required","",1,"form-control","w-100"],[4,"ngIf"],[1,"full-name-item","col-md-4"],["for","surname",1,"form-label"],["type","text","id","surname","name","clientSurname","formControlName","lastName",1,"form-control","w-100"],["for","phone",1,"form-label"],["type","text","id","phone","name","phone","formControlName","phone",1,"form-control","w-100","phone",3,"keydown"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","origin","d-sm-flex","flex-sm-row","justify-content-sm-between","w-100","mb-3"],[1,"origin-item"],["for","country",1,"form-label"],["id","country","formControlName","country","required","",1,"form-select"],["value",""],["for","index",1,"form-label"],["type","text","id","index","name","index","formControlName","zip",1,"form-control","w-100",3,"keydown"],[1,"form-group","address","w-100","mb-4"],["for","address",1,"form-label"],["type","text","id","address","name","address","formControlName","address",1,"form-control","w-100"],["for","product",1,"form-label"],["type","text","id","product","name","product","readonly","",1,"form-control","w-100"],["for","order-comment",1,"form-label"],["type","text","id","order-comment","name","comment","formControlName","comment",1,"form-control","w-100"],["type","submit","id","sendButton",1,"btn","btn-primary",3,"disabled"],["id","validationServer",1,"invalid-feedback","server-feedback"],[1,"invalid-feedback"]],template:function(n,e){if(n&1&&(i(0,"section",0)(1,"div",1)(2,"h3",2),o(3,"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),u(),i(4,"div",3)(5,"div",4),o(6,"\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0437\u0430\u043A\u0430\u0437. \u041C\u044B \u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F \u0441 \u0412\u0430\u043C\u0438 \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F!"),u(),i(7,"a",5),o(8,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),u()(),i(9,"form",6),S("ngSubmit",function(){return e.handleSubmit()}),i(10,"div",7)(11,"div",8)(12,"label",9),o(13,"\u0418\u043C\u044F"),u(),g(14,"input",10),a(15,Z,3,2,"div",11),u(),i(16,"div",12)(17,"label",13),o(18,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),u(),g(19,"input",14),a(20,ue,3,2,"div",11),u(),i(21,"div",12)(22,"label",15),o(23,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"),u(),i(24,"input",16),S("keydown",function(p){return e.numbersOnly(p)}),u(),a(25,ie,3,2,"div",17),u()(),i(26,"div",18)(27,"div",19)(28,"label",20),o(29,"\u0421\u0442\u0440\u0430\u043D\u0430"),u(),i(30,"select",21)(31,"option",22),o(32,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043D\u0443..."),u(),i(33,"option"),o(34,"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u044C"),u()(),a(35,le,2,0,"div",17),u(),i(36,"div",19)(37,"label",23),o(38,"\u0418\u043D\u0434\u0435\u043A\u0441"),u(),i(39,"input",24),S("keydown",function(p){return e.numbersOnly(p)}),u(),a(40,de,3,2,"div",11),u()(),i(41,"div",25)(42,"label",26),o(43,"\u0410\u0434\u0440\u0435\u0441"),u(),g(44,"input",27),a(45,pe,3,2,"div",11),u(),i(46,"div",25)(47,"label",28),o(48,"\u0422\u043E\u0432\u0430\u0440"),u(),g(49,"input",29),u(),i(50,"div",25)(51,"label",30),o(52,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443"),u(),g(53,"input",31),u(),i(54,"button",32),o(55,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),u(),i(56,"div",33),o(57," \u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437. "),u()()()()),n&2){let l,p,f,c,v,_;m(7),d("routerLink","/"),m(2),d("formGroup",e.formValues),m(6),d("ngIf",((l=e.formValues.get("name"))==null?null:l.invalid)&&(((l=e.formValues.get("name"))==null?null:l.touched)||((l=e.formValues.get("name"))==null?null:l.dirty))),m(5),d("ngIf",((p=e.formValues.get("lastName"))==null?null:p.invalid)&&(((p=e.formValues.get("lastName"))==null?null:p.touched)||((p=e.formValues.get("lastName"))==null?null:p.dirty))),m(5),d("ngIf",((f=e.formValues.get("phone"))==null?null:f.invalid)&&(((f=e.formValues.get("phone"))==null?null:f.touched)||((f=e.formValues.get("phone"))==null?null:f.dirty))),m(10),d("ngIf",((c=e.formValues.get("country"))==null?null:c.invalid)&&(((c=e.formValues.get("country"))==null?null:c.touched)||((c=e.formValues.get("country"))==null?null:c.dirty))&&((c=e.formValues.get("country"))==null||c.errors==null?null:c.errors.required)),m(5),d("ngIf",((v=e.formValues.get("zip"))==null?null:v.invalid)&&(((v=e.formValues.get("zip"))==null?null:v.touched)||((v=e.formValues.get("zip"))==null?null:v.dirty))),m(5),d("ngIf",((_=e.formValues.get("address"))==null?null:_.invalid)&&(((_=e.formValues.get("address"))==null?null:_.touched)||((_=e.formValues.get("address"))==null?null:_.dirty))),m(9),d("disabled",e.formValues.invalid)}},dependencies:[F,w,M,P,L,k,z,q,A,H,R,j],styles:["input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-touched.ng-pristine[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{display:block}.server-feedback[_ngcontent-%COMP%]{display:none}.btn-outline-primary[_ngcontent-%COMP%]{width:250px}"]})};var ce=[{path:"",component:V}],b=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=h({type:t});static \u0275inj=C({imports:[E.forChild(ce),E]})};var W=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=h({type:t});static \u0275inj=C({imports:[N,J,E,K,b,b]})};export{W as OrderModule};
